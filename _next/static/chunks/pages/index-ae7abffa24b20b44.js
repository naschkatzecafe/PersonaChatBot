(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{75557:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(27052)}])},27052:function(t,e,n){"use strict";n.r(e),n.d(e,{Fragment_3e13654041e1e97da783db7cc6af1db0:function(){return Fragment_3e13654041e1e97da783db7cc6af1db0},Fragment_6499b51736be44284c15de43340cb16c:function(){return Fragment_6499b51736be44284c15de43340cb16c},Fragment_cb5edf864ed730e6ef1545318d0da5a2:function(){return Fragment_cb5edf864ed730e6ef1545318d0da5a2},default:function(){return Component}});var r=n(82729),i=n(35944),a=n(67294),c=n(60687),s=n(6608),d=n(15637),l=n(94933),o=n(2546),h=n(71581),g=n(42841),Z=n(70917),m=n(58711),u=n(6445),_=n(45877),p=n(72627),x=n(73725),f=n(76607),b=n(11675),w=n(29248),F=n(84377),k=n(73954),C=n(204),v=n(14418),X=n(93943),y=n(53948),B=n(96272),z=n(44416),j=n(1078),S=n(20623),A=n(17889),R=n(97822),I=n(9564),D=n(23100),O=n(77626),E=n(24093),H=n(41689),N=n(62207),L=n(31963),P=n(84534),M=n(44504),T=n(73793),W=n(47018),q=n(295),G=n(41664),V=n.n(G),K=n(53798);n(54627),n(85711);var J=n(44026),Q=n(16970),Y=n(9008),$=n.n(Y);function _templateObject(){let t=(0,r._)(["\n    0% {\n        opacity: 0;\n    }\n    100% {\n        opacity: 1;\n    }\n"]);return _templateObject=function(){return t},t}let U=(0,Z.F4)(_templateObject());function Fragment_cb5edf864ed730e6ef1545318d0da5a2(){let[t,e]=(0,a.useContext)(c.DR);return(0,i.tZ)(a.Fragment,{children:(0,s.oA)(e.length>0)?(0,i.tZ)(a.Fragment,{children:(0,i.tZ)(d.Z,{css:{color:"crimson",zIndex:9999,position:"fixed",bottom:"30px",right:"30px",animation:"".concat(U," 1s infinite")},size:32})}):(0,i.tZ)(a.Fragment,{})})}function Fragment_6499b51736be44284c15de43340cb16c(){let[t,e]=(0,a.useContext)(c.DR);return(0,i.tZ)(a.Fragment,{children:(0,s.oA)(e.length>=2)?(0,i.tZ)(a.Fragment,{children:(0,i.tZ)(m.Vq.Root,{css:{zIndex:9999},open:e.length>=2,children:(0,i.BX)(m.Vq.Content,{children:[(0,i.tZ)(m.Vq.Title,{children:"Connection Error"}),(0,i.BX)(u.x,{as:"p",children:["Cannot connect to server: ",e.length>0?e[e.length-1].message:"",". Check if server is reachable at ",(0,s.LH)(k.Ks).href]})]})})}):(0,i.tZ)(a.Fragment,{})})}function Fragment_3e13654041e1e97da783db7cc6af1db0(){let t=(0,a.useContext)(c.M4.state),e=(0,a.useContext)(c.M4.state__app_state),[n,r]=(0,a.useContext)(c.DR),d=(0,a.useContext)(c.M4.state__app_state__chat_state),Z=(0,a.useContext)(c.M4.state__app_state__chat_state__emotion_state);(0,a.useEffect)(()=>(n([(0,s.ju)("state.app_state.chat_state.on_mount",{})]),()=>{}),[]);let m=(0,a.useRef)(null);s.xL.ref_message=m;let k=(0,a.useContext)(c.M4.state__modal_state),G=(0,a.useCallback)(t=>{let e=t.target;t.preventDefault();let r={...Object.fromEntries(new FormData(e).entries()),message:(0,s.eA)(s.xL.ref_message)};n([(0,s.ju)("state.app_state.chat_state.on_submit",{form_data:r})]),e.reset()});return(0,i.tZ)(a.Fragment,{children:(0,s.oA)(t.is_hydrated)?(0,i.tZ)(a.Fragment,{children:(0,s.oA)(e.token_is_valid)?(0,i.tZ)(a.Fragment,{children:(0,i.BX)(_.k,{css:{justifyContent:"start",width:"100%",height:"100%",minHeight:"100vh"},direction:"column",children:[(0,i.tZ)(a.Fragment,{children:(0,i.tZ)(C.k,{direction:"column",sx:{width:"100%",zIndex:"5",top:"0px",position:"fixed",alignItems:"left"},children:(0,i.BX)(_.k,{css:{backgroundColor:"var(--mauve-1)",borderBottom:"1px solid var(--mauve-4)",width:"100%",alignItems:"center",padding:"7px 20px 7px 20px;"},gap:"5",children:[(0,i.tZ)(v.X,{as:"h1",size:"4xl",sx:{weight:"bold",bgGradient:"linear(to-l, #f2ebc8, #de776c, #49312d)",bgClip:"text"},children:"iNotePal"}),(0,i.tZ)(p.r,{asChild:!0,children:(0,i.tZ)(V(),{href:"/",passHref:!0,children:(0,i.tZ)(u.x,{as:"p",color:"gray",children:"Home"})})}),(0,i.tZ)(p.r,{asChild:!0,children:(0,i.tZ)(V(),{href:"/analysis",passHref:!0,children:(0,i.tZ)(u.x,{as:"p",color:"gray",children:"Analysis"})})}),(0,i.tZ)(p.r,{asChild:!0,children:(0,i.tZ)(V(),{href:"/word_cloud",passHref:!0,children:(0,i.tZ)(u.x,{as:"p",color:"gray",children:"Word Cloud"})})}),(0,i.tZ)(x.x,{css:{flexGrow:"1"}}),(0,i.BX)(_.k,{css:{alignItems:"center"},gap:"3",children:[(0,i.tZ)(_.k,{children:(0,i.BX)(X.J,{children:[(0,i.tZ)(y.x,{children:(0,i.tZ)(B.z,{children:(0,i.tZ)(l.Z,{css:{color:"var(--current-color)"}})})}),(0,i.BX)(z.y,{children:[(0,i.tZ)(j.Y,{children:e.user_mail}),(0,i.tZ)(S.b,{children:(0,i.tZ)(B.z,{onClick:t=>n([(0,s.ju)("state.app_state.do_logout",{}),(0,s.ju)("state.app_state.check_login",{})],t,{}),sx:{width:"100%"},variant:"outline",children:"Logout"})}),(0,i.tZ)(A.u,{})]})]})}),(0,i.BX)(K.d.Root,{css:{spacing:"1"},direction:"left",children:[(0,i.tZ)(K.d.Trigger,{asChild:!0,children:(0,i.tZ)(B.z,{children:(0,i.tZ)(o.Z,{css:{color:"var(--current-color)"}})})}),(0,i.tZ)(K.d.Overlay,{css:{position:"fixed",left:"0",right:"0",bottom:"0",top:"0",z_index:50,background:"rgba(0, 0, 0, 0.5)",zIndex:"5"}}),(0,i.tZ)(K.d.Portal,{children:(0,i.tZ)(f.Q2,{css:{...J.Z.styles.global[":root"],...J.Z.styles.global.body},children:(0,i.tZ)(K.d.Content,{css:{left:"0",right:"auto",bottom:"0",top:"auto",position:"fixed",z_index:50,display:"flex",height:"100%",width:"40%",padding:"1em",backgroundColor:"#FFF"},children:(0,i.BX)(_.k,{align:"start",direction:"column",gap:"2",children:[(0,i.tZ)(v.X,{as:"h1",size:"4xl",sx:{weight:"bold",bgGradient:"linear(to-l, #f2ebc8, #de776c, #49312d)",bgClip:"text"},children:"iNotePal"}),(0,i.tZ)(R.i,{sx:{borderColor:"black"}}),(0,i.tZ)(_.k,{css:{flex:1,justifySelf:"stretch",alignSelf:"stretch"}}),(0,i.tZ)(I.x,{as:"i",sx:{fontSize:"2em",weight:"bold"},children:"Calendar"}),(0,i.tZ)(Q.ZP,{css:{color:"var(--accent-11)",backgroundColor:"var(--accent-1)",width:"100%"},locale:"ko-KR",onChange:t=>n([(0,s.ju)("state.app_state.chat_state.switch_day",{day:t.toDateString()})],t,{}),value:d.select_date}),(0,i.tZ)(_.k,{css:{flex:1,justifySelf:"stretch",alignSelf:"stretch"}}),(0,i.tZ)(I.x,{as:"i",sx:{fontSize:"2em",weight:"bold"},children:d.select_date.slice(4,void 0)}),(0,i.tZ)(_.k,{align:"start",direction:"row",gap:"2",children:Object.entries(Z.colors).map((t,e)=>(0,i.BX)(_.k,{align:"start",direction:"row",gap:"2",children:[(0,i.tZ)(I.x,{sx:{color:t[1],fontSize:"1em"},children:"●"}),(0,i.tZ)(I.x,{sx:{fontSize:"1em"},children:t[0]})]},e))}),(0,i.tZ)(a.Fragment,{children:(0,i.tZ)(_.k,{css:{width:"100%",height:"30vh",flexWrap:"wrap"},gap:"2",children:Z.get_box_params.map((t,e)=>(0,i.tZ)(D.xu,{sx:{background:t.at(1),borderRadius:"10px",width:t.at(2),height:t.at(3)}},e))})})]})})})})]})]})]})})}),(0,i.tZ)(b.W,{css:{marginTop:"120px"}}),(0,i.BX)(_.k,{align:"start",css:{height:"100%",margin:"10px"},direction:"row",gap:"2",children:[(0,i.tZ)(b.W,{css:{marginLeft:"120px"}}),(0,i.tZ)(_.k,{css:{flex:1,justifySelf:"stretch",alignSelf:"stretch"}}),(0,i.BX)(_.k,{align:"start",css:{height:"80vh",width:"50%"},direction:"column",gap:"2",children:[(0,i.tZ)(a.Fragment,{children:(0,s.oA)(d.has_past_chats)?(0,i.tZ)(a.Fragment,{children:(0,i.tZ)(_.k,{align:"start",direction:"row",gap:"2",children:d.past_chats.map((t,e)=>(0,i.tZ)(B.z,{onClick:e=>n([(0,s.ju)("state.app_state.chat_state.select_past_card",{chat_id:t.id})],e,{}),sx:{background:"#f2ebc8",color:"#49312d"},children:t.id},e))})}):(0,i.tZ)(a.Fragment,{})}),(0,i.tZ)(v.X,{size:"xl",sx:{weight:"bold",align:"center",paddingBottom:"2vh"},children:d.db_select_date}),(0,i.tZ)(w.x,{css:{width:"100%",minHeight:"600px"},children:(0,i.tZ)(a.Fragment,{children:(0,s.oA)(d.is_creating)?(0,i.tZ)(a.Fragment,{children:(0,i.BX)(_.k,{align:"center",direction:"row",gap:"2",children:[(0,i.tZ)(O.D,{isIndeterminate:d.is_creating}),(0,i.tZ)(u.x,{as:"p",children:"친구가 말 거는 중.."})]})}):(0,i.tZ)(a.Fragment,{children:d.current_messages.map((t,e)=>(0,i.tZ)(a.Fragment,{children:(0,s.oA)("user"===t.at(0))?(0,i.tZ)(a.Fragment,{children:(0,i.BX)(_.k,{align:"end",css:{width:"100%"},direction:"column",gap:"2",children:[(0,i.BX)(_.k,{align:"end",css:{width:"100%"},direction:"row",gap:"2",children:[(0,i.tZ)(u.x,{as:"p",css:{width:"100%",textAlign:"right"},children:t.at(1)}),(0,i.tZ)(l.Z,{css:{color:"var(--current-color)"}})]}),(0,i.tZ)(F.C,{children:t.at(2)})]})}):(0,i.tZ)(a.Fragment,{children:(0,i.BX)(_.k,{align:"start",css:{width:"100%"},direction:"row",gap:"2",children:[(0,i.tZ)(h.Z,{css:{color:"var(--current-color)"}}),(0,i.tZ)(u.x,{as:"p",css:{width:"100%"},children:t.at(1)})]})})},e))})})}),(0,i.BX)(_.k,{align:"center",css:{width:"100%"},direction:"column",gap:"2",children:[(0,i.tZ)(D.xu,{as:"form",onSubmit:G,sx:{width:"100%"},children:(0,i.BX)(_.k,{align:"start",css:{width:"100%"},direction:"row",gap:"2",children:[(0,i.tZ)(E.I,{id:"message",isDisabled:!d.is_exist_chat,isRequired:!0,placeholder:"대화를 입력하세요.",ref:m,sx:{width:"100%"}}),(0,i.tZ)(a.Fragment,{children:(0,s.oA)(t.is_hydrated)?(0,i.tZ)(a.Fragment,{children:(0,i.tZ)(B.z,{isDisabled:!d.is_exist_chat,isLoading:d.is_waiting,type:"submit",variant:"outline",children:(0,i.tZ)(g.Z,{css:{color:"var(--current-color)"}})})}):(0,i.tZ)(a.Fragment,{})})]})}),(0,i.tZ)(a.Fragment,{children:(0,s.oA)(d.is_closed)?(0,i.tZ)(a.Fragment,{children:(0,i.BX)(_.k,{align:"start",direction:"row",gap:"2",children:[(0,i.tZ)(H.C,{colorScheme:"red",variant:"subtle",children:d.chat_emotion}),(0,i.tZ)(B.z,{onClick:t=>n([(0,s.ju)("state.app_state.chat_state.start_new_chat",{})],t,{}),size:"sm",sx:{background:"#ebb9b0",color:"#49312d",borderRadius:"md"},children:"대화 새로 시작하기"})]})}):(0,i.tZ)(a.Fragment,{children:(0,s.oA)(d.current_messages.length>2)?(0,i.tZ)(a.Fragment,{children:(0,i.tZ)(B.z,{onClick:t=>n([(0,s.ju)("state.app_state.chat_state.evaluate_chat",{}),(0,s.ju)("state.modal_state.change",{})],t,{}),size:"sm",sx:{background:"#ebb9b0",color:"#49312d",borderRadius:"md"},children:"대화 마치기"})}):(0,i.tZ)(a.Fragment,{})})}),(0,i.tZ)(N.u_,{isCentered:!0,isOpen:k.show,children:(0,i.tZ)(L.Z,{children:(0,i.BX)(P.h,{children:[(0,i.tZ)(M.x,{children:"오늘의 감정"}),(0,i.tZ)(T.f,{children:(0,i.tZ)(_.k,{children:(0,i.tZ)(D.xu,{sx:{background:Z.get_box_params_for_one,borderRadius:"10px",width:"100%",height:"10vh"}})})}),(0,i.tZ)(W.m,{children:(0,i.tZ)(B.z,{onClick:t=>n([(0,s.ju)("state.modal_state.change",{})],t,{}),children:"닫기"})})]})})})]})]}),(0,i.tZ)(_.k,{css:{flex:1,justifySelf:"stretch",alignSelf:"stretch"}}),(0,i.tZ)(b.W,{css:{marginRight:"120px"}})]}),(0,i.tZ)(x.x,{css:{flexGrow:1}})]})}):(0,i.tZ)(a.Fragment,{})}):(0,i.tZ)(a.Fragment,{children:(0,i.tZ)(C.k,{align:"center",justify:"center",sx:{height:"100vh",weight:"100vw"},children:(0,i.tZ)(q.$,{})})})})}function Component(){return(0,i.BX)(a.Fragment,{children:[(0,i.BX)(a.Fragment,{children:[(0,i.tZ)("div",{css:{position:"fixed",width:"100vw",height:"0"},children:(0,i.tZ)(Fragment_cb5edf864ed730e6ef1545318d0da5a2,{})}),(0,i.tZ)(Fragment_6499b51736be44284c15de43340cb16c,{})]}),(0,i.tZ)(a.Fragment,{children:(0,i.tZ)(Fragment_3e13654041e1e97da783db7cc6af1db0,{})}),(0,i.BX)($(),{children:[(0,i.tZ)("title",{children:"App | Index"}),(0,i.tZ)("meta",{content:"favicon.ico",property:"og:image"})]})]})}}},function(t){t.O(0,[18,424,345,574,299,774,888,179],function(){return t(t.s=75557)}),_N_E=t.O()}]);