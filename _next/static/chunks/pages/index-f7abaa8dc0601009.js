(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(7052)}])},7052:function(t,e,n){"use strict";n.r(e),n.d(e,{Fragment_6499b51736be44284c15de43340cb16c:function(){return Fragment_6499b51736be44284c15de43340cb16c},Fragment_bbdb4f381f7285438fd446ba2cb9b878:function(){return Fragment_bbdb4f381f7285438fd446ba2cb9b878},Fragment_cb5edf864ed730e6ef1545318d0da5a2:function(){return Fragment_cb5edf864ed730e6ef1545318d0da5a2},default:function(){return Component}});var i=n(2729),r=n(6811),a=n(7294),c=n(687),s=n(6608),d=n(4933),l=n(1581),o=n(2841),h=n(9894),g=n(917),m=n(9915),Z=n(6445),p=n(5877),_=n(2627),u=n(3725),f=n(1675),b=n(9248),x=n(4152),w=n(4377),F=n(3954),k=n(204),C=n(4418),v=n(5177),y=n(3948),X=n(9222),B=n(4416),j=n(8253),z=n(623),A=n(7889),I=n(7626),D=n(3100),E=n(1686),H=n(7754),R=n(295),O=n(1664),L=n.n(O),N=n(6970);n(4627),n(1808),n(4026);var q=n(9008),M=n.n(q);function _templateObject(){let t=(0,i._)(["\n    0% {\n        opacity: 0;\n    }\n    100% {\n        opacity: 1;\n    }\n"]);return _templateObject=function(){return t},t}let P=(0,g.F4)(_templateObject());function Fragment_6499b51736be44284c15de43340cb16c(){let[t,e]=(0,a.useContext)(c.DR);return(0,r.tZ)(a.Fragment,{children:(0,s.oA)(e.length>=2)?(0,r.tZ)(a.Fragment,{children:(0,r.tZ)(m.Vq.Root,{css:{zIndex:9999},open:e.length>=2,children:(0,r.BX)(m.Vq.Content,{children:[(0,r.tZ)(m.Vq.Title,{children:"Connection Error"}),(0,r.BX)(Z.x,{as:"p",children:["Cannot connect to server: ",e.length>0?e[e.length-1].message:"",". Check if server is reachable at ",(0,s.LH)(F.Ks).href]})]})})}):(0,r.tZ)(a.Fragment,{})})}function Fragment_bbdb4f381f7285438fd446ba2cb9b878(){let t=(0,a.useContext)(c.M4.state),e=(0,a.useContext)(c.M4.state__app_state),[n,i]=(0,a.useContext)(c.DR),h=(0,a.useContext)(c.M4.state__app_state__chat_state),g=(0,a.useRef)(null);s.xL.ref_message=g;let m=(0,a.useCallback)(t=>{let e=t.target;t.preventDefault();let i={...Object.fromEntries(new FormData(e).entries()),message:(0,s.eA)(s.xL.ref_message)};n([(0,s.ju)("state.app_state.chat_state.on_submit",{form_data:i})]),e.reset()});return(0,r.tZ)(a.Fragment,{children:(0,s.oA)(t.is_hydrated)?(0,r.tZ)(a.Fragment,{children:(0,s.oA)(e.token_is_valid)?(0,r.tZ)(a.Fragment,{children:(0,r.BX)(p.k,{css:{alignItems:"center",justifyContent:"start",width:"100%",height:"100%",minHeight:"100vh"},direction:"column",children:[(0,r.tZ)(a.Fragment,{children:(0,r.tZ)(k.k,{direction:"column",sx:{width:"100%",zIndex:"5",top:"0px",position:"fixed",alignItems:"left"},children:(0,r.BX)(p.k,{css:{backgroundColor:"var(--mauve-1)",borderBottom:"1px solid var(--mauve-4)",width:"100%",alignItems:"center",padding:"7px 20px 7px 20px;"},gap:"5",children:[(0,r.tZ)(C.X,{as:"h1",size:"4xl",sx:{weight:"bold"},children:"Pal-ette"}),(0,r.tZ)(_.r,{asChild:!0,children:(0,r.tZ)(L(),{href:"/",passHref:!0,children:(0,r.tZ)(Z.x,{as:"p",color:"gray",children:"Home"})})}),(0,r.tZ)(_.r,{asChild:!0,children:(0,r.tZ)(L(),{href:"/",passHref:!0,children:(0,r.tZ)(Z.x,{as:"p",color:"gray",children:"History"})})}),(0,r.tZ)(_.r,{asChild:!0,children:(0,r.tZ)(L(),{href:"/analysis",passHref:!0,children:(0,r.tZ)(Z.x,{as:"p",color:"gray",children:"Analysis"})})}),(0,r.tZ)(u.x,{css:{flexGrow:"1"}}),(0,r.tZ)(p.k,{css:{alignItems:"center"},gap:"3",children:(0,r.tZ)(u.x,{css:{"@media screen and (min-width: 0)":{display:"flex"},"@media screen and (min-width: 30em)":{display:"flex"},"@media screen and (min-width: 48em)":{display:"flex"},"@media screen and (min-width: 62em)":{display:"flex"},"@media screen and (min-width: 80em)":{display:"flex"},"@media screen and (min-width: 96em)":{display:"flex"}},children:(0,r.BX)(v.J,{children:[(0,r.tZ)(y.x,{children:(0,r.tZ)(X.z,{children:(0,r.tZ)(d.Z,{css:{color:"var(--current-color)"}})})}),(0,r.BX)(B.y,{children:[(0,r.tZ)(j.Y,{children:e.user_mail}),(0,r.tZ)(z.b,{children:(0,r.tZ)(X.z,{onClick:t=>n([(0,s.ju)("state.app_state.do_logout",{}),(0,s.ju)("state.app_state.check_login",{})],t,{}),sx:{width:"100%"},variant:"outline",children:"Logout"})}),(0,r.tZ)(A.u,{})]})]})})})]})})}),(0,r.tZ)(f.W,{css:{marginTop:"120px"}}),(0,r.BX)(p.k,{align:"start",css:{height:"100%",margin:"10px"},direction:"row",gap:"2",children:[(0,r.tZ)(p.k,{align:"start",css:{width:"50%"},direction:"column",gap:"2",children:(0,r.tZ)(N.ZP,{css:{color:"var(--accent-11)",backgroundColor:"var(--accent-1)",width:"100%"},locale:"ko-KR",onChange:t=>n([(0,s.ju)("state.app_state.chat_state.switch_day",{day:t.toDateString()})],t,{}),value:h.select_date})}),(0,r.tZ)(p.k,{css:{flex:1,justifySelf:"stretch",alignSelf:"stretch"}}),(0,r.BX)(p.k,{align:"start",css:{height:"100%",width:"50%"},direction:"column",gap:"2",children:[(0,r.tZ)(a.Fragment,{children:(0,s.oA)(h.has_past_chats)?(0,r.tZ)(a.Fragment,{children:(0,r.tZ)(b.x,{children:(0,r.tZ)(p.k,{align:"start",direction:"row",gap:"2",children:h.past_chats.map((t,e)=>(0,r.tZ)(x.z,{onClick:e=>n([(0,s.ju)("state.app_state.chat_state.select_past_card",{chat_id:t.id})],e,{}),children:t.id},e))})})}):(0,r.tZ)(a.Fragment,{})}),(0,r.tZ)(C.X,{size:"xl",sx:{weight:"bold",align:"center",paddingBottom:"2vh"},children:h.db_select_date}),(0,r.tZ)(b.x,{css:{width:"100%"},children:(0,r.tZ)(a.Fragment,{children:(0,s.oA)(h.is_creating)?(0,r.tZ)(a.Fragment,{children:(0,r.BX)(p.k,{align:"center",direction:"row",gap:"2",children:[(0,r.tZ)(I.D,{isIndeterminate:h.is_creating}),(0,r.tZ)(Z.x,{as:"p",children:"친구가 말 거는 중.."})]})}):(0,r.tZ)(a.Fragment,{children:(0,r.BX)(p.k,{align:"center",css:{width:"100%"},direction:"column",gap:"2",children:[h.current_messages.map((t,e)=>(0,r.tZ)(a.Fragment,{children:(0,s.oA)("user"===t.at(0))?(0,r.tZ)(a.Fragment,{children:(0,r.BX)(p.k,{align:"end",css:{width:"100%"},direction:"column",gap:"2",children:[(0,r.BX)(p.k,{align:"end",css:{width:"100%"},direction:"row",gap:"2",children:[(0,r.tZ)(Z.x,{as:"p",css:{width:"100%",textAlign:"right"},children:t.at(1)}),(0,r.tZ)(d.Z,{css:{color:"var(--current-color)"}})]}),(0,r.tZ)(w.C,{children:t.at(2)})]})}):(0,r.tZ)(a.Fragment,{children:(0,r.BX)(p.k,{align:"start",css:{width:"100%"},direction:"row",gap:"2",children:[(0,r.tZ)(l.Z,{css:{color:"var(--current-color)"}}),(0,r.tZ)(Z.x,{as:"p",css:{width:"100%"},children:t.at(1)})]})})},e)),(0,r.tZ)(D.xu,{as:"form",onSubmit:m,sx:{width:"100%"},children:(0,r.BX)(p.k,{align:"start",css:{width:"100%"},direction:"row",gap:"2",children:[(0,r.tZ)(E.I,{id:"message",isDisabled:!h.is_exist_chat,isRequired:!0,placeholder:"대화를 입력하세요.",ref:g,sx:{width:"100%"}}),(0,r.tZ)(a.Fragment,{children:(0,s.oA)(t.is_hydrated)?(0,r.tZ)(a.Fragment,{children:(0,r.tZ)(X.z,{isDisabled:!h.is_exist_chat,isLoading:h.is_waiting,type:"submit",variant:"outline",children:(0,r.tZ)(o.Z,{css:{color:"var(--current-color)"}})})}):(0,r.tZ)(a.Fragment,{})})]})}),(0,r.tZ)(a.Fragment,{children:(0,s.oA)(h.is_closed)?(0,r.tZ)(a.Fragment,{children:(0,r.BX)(p.k,{align:"start",direction:"row",gap:"2",children:[(0,r.tZ)(w.C,{children:h.chat_emotion}),(0,r.tZ)(x.z,{onClick:t=>n([(0,s.ju)("state.app_state.chat_state.start_new_chat",{})],t,{}),children:"대화 새로 시작하기"})]})}):(0,r.tZ)(a.Fragment,{children:(0,r.tZ)(x.z,{css:{width:"100%"},onClick:t=>n([(0,s.ju)("state.app_state.chat_state.evaluate_chat",{})],t,{}),size:"4",variant:"soft",children:"대화 마치기"})})})]})})})})]})]}),(0,r.tZ)(u.x,{css:{flexGrow:1}})]})}):(0,r.tZ)(a.Fragment,{})}):(0,r.tZ)(a.Fragment,{children:(0,r.tZ)(H.M,{children:(0,r.tZ)(R.$,{})})})})}function Fragment_cb5edf864ed730e6ef1545318d0da5a2(){let[t,e]=(0,a.useContext)(c.DR);return(0,r.tZ)(a.Fragment,{children:(0,s.oA)(e.length>0)?(0,r.tZ)(a.Fragment,{children:(0,r.tZ)(h.Z,{css:{color:"crimson",zIndex:9999,position:"fixed",bottom:"30px",right:"30px",animation:"".concat(P," 1s infinite")},size:32})}):(0,r.tZ)(a.Fragment,{})})}function Component(){return(0,r.BX)(a.Fragment,{children:[(0,r.BX)(a.Fragment,{children:[(0,r.tZ)("div",{css:{position:"fixed",width:"100vw",height:"0"},children:(0,r.tZ)(Fragment_cb5edf864ed730e6ef1545318d0da5a2,{})}),(0,r.tZ)(Fragment_6499b51736be44284c15de43340cb16c,{})]}),(0,r.tZ)(a.Fragment,{children:(0,r.tZ)(Fragment_bbdb4f381f7285438fd446ba2cb9b878,{})}),(0,r.BX)(M(),{children:[(0,r.tZ)("title",{children:"App | Index"}),(0,r.tZ)("meta",{content:"favicon.ico",property:"og:image"})]})]})}}},function(t){t.O(0,[391,483,212,924,824,774,888,179],function(){return t(t.s=5557)}),_N_E=t.O()}]);